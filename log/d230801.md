# 2023年8月

## [08月08日(火)](#08) <a id="08"></a>

恐ろしく眠い。

午前中は会議。

あれもしよう、これもしようと考えているが、どうにも時間が細切れで集中できない。あと眠い。

## [08月07日(月)](#07) <a id="07"></a>

1on1たくさん。

非常勤委嘱理由書出した。

学生さんが次に読む論文案投げた。

## [08月06日(日)](#06) <a id="06"></a>

NOP

引き続き体が超絶重い。低気圧のせい？

## [08月05日(土)](#05) <a id="05"></a>

NOP

ひどい鼻炎。体が重い。

## [08月04日(金)](#04) <a id="04"></a>

会議。

最近、日記をゆっくり書く暇がない。午前中から何かしら予定が入っており、かつ「部屋に来たら大量にTodoリストにタスクを突っ込み、帰るまでになるべく消化する」という日々なので、ゆっくり自分の思考をまとめる余裕がない。家に帰ってから寝るまでPCに向かう時間は取れず、日記を書く時間がほとんどとれない。

いや、時間そのものは取れるんだけれど、日記って「書くぞ」と思って書くものじゃなくて、いろいろ考えていて「あ、これ将来の自分のために残しておこうかな」と思ったことを書くものなので、ある程度まとまった時間、何かに集中する時間がないと、そもそも日記を書こうとは思わないんだ。つまり、日記の長さは心の余裕と強い相関を持つ。

たまったメールの整理をした。まだ整理しきれてない。

長年(2年くらい？)の懸案だった学則改正の書類出した。だいぶタスクリストが痩せてきたぞ。塩漬けタスクが処理できはじめているのがうれしい。

なんかみんな[CCP2023](https://ccp2023.jp/)に行っちゃって、なんか一人研究から取り残されてる気持ちになる。

[STATPHYS28](https://statphys28.org/)も、せっかく日本でやるのに全く参加できない。悲しい。

## [08月03日(木)](#03) <a id="03"></a>

中間発表振替。

研究室ミーティング。

CCP2023の出張関連書類提出した。

* 事前に提出するもの
  * 学外活動届：本人と指導教員の押印の上で学生課に提出(コピーをとって自分でも保存)
  * 出張旅費申請書 (様式32)：本人と指導教員の押印が必要
  * 鉄道などの運賃が確認できる書類
  * 出張用務・日程が確認できる書類
  * 出張依頼書 (様式33)
  * 立替払い精算申請書
  * 参加登録費の領収書
* 出張後に提出するもの
  * 出張報告書

本人の押印が必要なのは「学外活動届」と「出張旅費申請書」。残りの領収書全てに支払い責任者の押印。さらに、科研費で支払うなら科研費ハンコも押印。

これまでコロナ禍でほとんど出張していなかったので、手続きがよくわからなかった。これでもう大丈夫のはず？

今年は予定外の出費が多く、ほとんど公費を使い切っていたので、科研費があって本当によかった。

## [08月02日(水)](#02) <a id="02"></a>

昨日のまとめ。

Markdownで書いたファイルをRe:VIEWに変換してPDF化するコードが動かない。ものすごく昔は、RedcarpetがRe:VIEWレンダラを持っていたのでそれを使っていたのだが、途中でなくなったらしい。仕方なく`md2review`を使ったが、エラーが出る。問題は数式の中にMarkdownの予約シンボルがあるとバグること。

たとえばこんなファイルを食わせてみると、

```md
# test

$$
a_1 + a_2
$$
```

こうなってしまう。

```txt
= test


$$
a@<b>{1 + a}2
$$
```

`_`で挟まれた場所を太字にしようとしている。

あとはこんなのが、

```md
# test

$$
a^*+b^*
$$
```

こうなる。

```txt
= test
$$
a^@<b>{+b^}
$$
```

さらに、改行も処理されてしまう。これが、

```md
$$
\begin{aligned}
a &= 1\\
b &= 2
\end{aligned}
$$
```

こうなる。

```txt
$$
\begin{aligned}
a &= 1\
b &= 2
\end{aligned}
$$
```

というわけで、問題になりそうな記号類を全てエスケープしてからmd2reviewに食わせて、その後もとに戻す、という処理をしたのだが、makefileが

```make
%.re: ../%/README.md
  ruby pre.rb $^ > $*.pre
  md2review $*.pre > $*.post
  ruby post.rb $*.post > $*.re
```

という感じになってダサい。おそらくRedcarpetのレンダラを自作するのがまっとうな解決策だが、そこまですべきかなぁ・・・

あれ？手元の環境には`redcarpet/render/review`があるぞ？なんでだ？

こんなコードを書いてみる。

```rb
require 'redcarpet'
a = $LOADED_FEATURES.dup()
require 'redcarpet/render/review'
b = $LOADED_FEATURES

puts b-a
```

結果。

```txt
/Users/watanabe/.rbenv/versions/3.2.2/lib/ruby/3.2.0/digest/version.rb
/Users/watanabe/.rbenv/versions/3.2.2/lib/ruby/3.2.0/x86_64-darwin22/digest.bundle
/Users/watanabe/.rbenv/versions/3.2.2/lib/ruby/3.2.0/digest/loader.rb
/Users/watanabe/.rbenv/versions/3.2.2/lib/ruby/3.2.0/digest.rb
/Users/watanabe/.rbenv/versions/3.2.2/lib/ruby/3.2.0/x86_64-darwin22/digest/md5.bundle
/Users/watanabe/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/md2review-1.12.1/lib/redcarpet/render/review.rb
```

`md2review`によりレンダラに`render/review`が追加されている。なるほど。それじゃ、これを使えばいちいちファイルに何度も吐かなくて済むはずか。

ひょっとして、昔からRedcarptはRe:VIEWには対応していなくて、僕がmd2reviewを入れたからメソッドが追加されたのを勘違いしていた？

1on1たくさん。

数理物理成績確定した。わりと理想的な成績分布だったのでは。

とりあえず解析力学のリポジトリ、`Redcarpet::Render::ReVIEW.new`を使って一括変換する形に修正。ついでにLinterとしてRubocopを入れたが、相変わらずうるさいのでrubocop.ymlに

```yml
Metrics:
  Enabled: false
```

と書いてしまった。それでもまだうるさい。あと、若干動作が遅いのが気になるなぁ。

## [08月01日(火)](#01) <a id="01"></a>

もう8月ですかそうですか。

えらい先生がいっぱいいる会議でぺーぺーの僕が発言してしまう問題、もちろん僕に問題はあるんだけど、別に会議が好きとか目立ちたいとかそういうのは全くなくって、むしろ会議なんて大嫌いだけど、僕の信じる幸せな未来の実現に少しでも近づけるための努力である、ということは、誰かに知っておいて欲しい気はする。

だいたい会議で発言したら仕事降ってくるわけだし。黙ってる方が局所的最適解なのは間違いないんだ。

昨日も会議。今日も会議。

Re:VIEWが動かない。原因をなんとか解明して対応。忘れないうちに後でまとめる。
