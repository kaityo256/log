# 2024年6月

## [06月17日(月)](#17) <a id="17"></a>

数理物理。極座標で計算ミスして混乱。直前でやることにしたから。

去年、上付き下付きで混乱したからそこはしっかりやったんだけど、今回は簡単だと思って予習不足だった。やーねー。

## [06月16日(日)](#16) <a id="16"></a>

NOP

## [06月15日(土)](#15) <a id="15"></a>

今週は本当に忙しくて、月曜から日記を書いてなかった。Google Calendarの予定を見て何をしていたか確認する感じ。

レポートの採点。4時間半くらいかかったぞ。

講義ノートの更新をしたかったが、月曜日の予習で精一杯だった。うーん。

## [06月14日(金)](#14) <a id="14"></a>

1on1が4回。偉い人がいる会議。

数理物理。今日は仮想仕事。

物理情報工学特別講義。今日は富士通の本多さん。Ontennaの人。

昨年はデンマークにいると聞いていたので、講義はないだろうと油断していたらオンラインで繋いだらしい。
今年はもう帰国されたとのことで講義後にかけつけた。

Ontennaもエキマトペも、ワークショップも、なんか理想やアイディアを「形にする」のがすごい。

「なにかを形にするのはとても大変で、いろいろ苦労もあると思いますが、どうやって乗り越えていますか？」と聞いたら、「誰を笑顔にしたいかを考える」という回答がきたのが印象的。

## [06月13日(木)](#13) <a id="13"></a>

輪講。研究室ミーティング。講義準備。

## [06月12日(水)](#12) <a id="12"></a>

ほぼ何もできなかった。

## [06月11日(火)](#11) <a id="11"></a>

お仕事。

## [06月10日(月)](#10) <a id="10"></a>

数理物理第三回。いい感じだったのに、マイクの電池が切れて途中で音が録音されてなかった・・・orz

## [06月07日(金)](#07) <a id="07"></a>

数理物理第二回。途中でカメラが追いかけてきてくれなかった。マイクがぶら下げていた金具とぶつかってしまって音も割れた。

講義はギリギリ時間内には終わったが、なんか足元がおぼつかない感じだったな・・・

夏季安全点検報告した。

## [06月06日(木)](#06) <a id="06"></a>

研究室ミーティング。

さくらインターネットの立て替え払い出した。

そういえばBinderさん元気かな、と思ったら、亡くなってた・・・

[Kurt Binder](https://en.wikipedia.org/wiki/Kurt_Binder)

2022年9月。2年前か・・・

追悼研究会も実施されてた。

[Computational statistical physics in the 21st century: The legacy of Kurt Binder](https://www.cecam.org/workshop-details/computational-statistical-physics-in-the-21st-century-the-legacy-of-kurt-binder-1256)

自分のつぶやきを検索してみたら、2023年1月にBinderさんが亡くなったことに触れているな。全く覚えていなかった。ひどいもんだ。

[Obituary Prof. Dr. Kurt Binder](https://www.fz-juelich.de/en/ias/jsc/news/news-items/news-flashes/2022/prof-binder-obituary)

## [06月05日(水)](#05) <a id="05"></a>

```sh
$ dmd pptxgrep.d
pptxgrep.d(8): Error: unable to read module `xml`
pptxgrep.d(8):        Expected 'std/xml.d' or 'std/xml/package.d' in one of the following import paths:
import path[0] = /usr/local/opt/dmd/include/dlang/dmd
```

xmlライブラリが読み込めない。

五億年ぶりにMacでD言語のコードをコンパイル。

```sh
brew upgrade dmd
dub fetch dxml
```

でもコンパイルできない。いろいろ調べたが、[`std.xml`がobsoleteになっているらしい？](https://docarchives.dlang.io/v2.094.0/phobos/std_xml.html)

```txt
Warning: This module is considered out-dated and not up to Phobos' current standards. It will be removed from Phobos in 2.101.0. If you still need it, go to https://github.com/DigitalMars/undeaD
```

```txt
$ dmd --version
DMD64 D Compiler v2.109.0

Copyright (C) 1999-2024 by The D Language Foundation, All Rights Reserved written by Walter Bright
```

Phobosのバージョンとコンパイラのバージョン一致しているの？なら2.109だから、std.xmlは消えたんだな。

ってことは今はpptxgrepは再コンパイルしたら使えないのか。また別の言語で作り直すかなぁ。次は何でやるかなぁ。

[Lion CoveとSkymontの詳細が明らかに。Hyper-Threading「非対応」で電力効率爆上げ](https://pc.watch.impress.co.jp/docs/news/event/1596852.html)

ついにHT廃止ですか。

なんとなく昔のスライドをサルベージした。

[ハイパースレッディングの 並列化効率への影響](https://speakerdeck.com/kaityo256/hyper-threading)

## [06月04日(火)](#04) <a id="04"></a>

数理物理の録画を確認したが、音が駄目だった。ワイヤレスマイクが必要。RODE Wireless GOが良いらしいが、さすがに高い(4万〜5万)。いろいろ調べてサンワダイレクトの400-MCW001を頼んでみた。

メモ。古い環境でPython仮想環境を構築する方法。pip無しで仮想環境を構築してから、後でpipをローカルにインストールする。

```sh
python3 -m venv myenv --without-pip  
source myenv/bin/activate 
wget https://bootstrap.pypa.io/pip/3.6/get-pip.py
python3 get-pip.py
```

NumPyが裏でなんスレッド使っているか確認。`threadpoolctl`をインストール。

```sh
python3 -m pip install threadpoolctl ipython
```

ipython3上で以下を実行。

```txt
from threadpoolctl import threadpool_info
import numpy as np
threadpool_info()
```

計算ノード。

```txt
[{'user_api': 'blas',
  'internal_api': 'openblas',
  'prefix': 'libopenblas',
  'filepath': '/home/watanabe/github/simple_rbm/myenv/lib/python3.6/site-packages/numpy.libs/libopenblasp-r0-09e95953.3.13.so',
  'version': '0.3.13',
  'threading_layer': 'pthreads',
  'architecture': 'SkylakeX',
  'num_threads': 40}]
```

AMD EPYC

```txt
[{'user_api': 'blas',
  'internal_api': 'openblas',
  'prefix': 'libopenblas',
  'filepath': '/home/watanabe/github/simple_rbm/myenv/lib/python3.6/site-packages/numpy.libs/libopenblasp-r0-09e95953.3.13.so',
  'version': '0.3.13',
  'threading_layer': 'pthreads',
  'architecture': 'Zen',
  'num_threads': 32}]
```

Mac。

```txt
[{'user_api': 'blas',
  'internal_api': 'openblas',
  'num_threads': 10,
  'prefix': 'libopenblas',
  'filepath': '/Users/watanabe/github/simple_rbm/myenv/lib/python3.12/site-packages/numpy/.dylibs/libopenblas64_.0.dylib',
  'version': '0.3.23.dev',
  'threading_layer': 'pthreads',
  'architecture': 'Haswell'}]
```

OpenBLASのスレッド数設定は`OPENBLAS_NUM_THREADS`だそうな。なので、NumPyが裏で使うスレッド数を設定するには、

```py
OPENBLAS_NUM_THREADS=1 python3 hoge.py
```

などとすれば良い。`OMP_NUM_THREADS`じゃないのか・・・。

2024年度 理工学部 教授・准教授就任講演。僕はトップバッター。今回はちゃんとネクタイをした。

いかん、頭が全く回らん。

## [06月03日(月)](#03) <a id="03"></a>

数理物理第一回。とりあえずなんとか終えた。

録画もしたが、音が厳しいな。やはりワイヤレスマイクから入力する必要がある。買うか。

明日も発表があるんだよな・・・

数理物理の試験形態入力済ませた。

## [06月02日(日)](#02) <a id="02"></a>

数理物理の講義予習。黒板ガリガリ1時間半は体力を消耗する。これが週２日はきつい。

## [06月01日(土)](#01) <a id="01"></a>

NOP
