<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
                <title>2025年6月</title>
    <style type="text/css">
      code {
        white-space: pre;
      }
    </style>
        <style type="text/css"></style>

    <link rel="stylesheet" href="style.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- link rel="stylesheet" href="github-markdown.css" type="text/css" / -->
          </head>

  <body>
    <article class="markdown-body">
                        <h1 id="年6月">2025年6月</h1>
                        <h2 id="月06日金"><a href="#06">06月06日(金)</a>
                        <a id="06"></a></h2>
                        <p>物性研スパコンでのLAMMPSのバルクジョブのサンプルコード書いた。</p>
                        <p><a
                        href="https://github.com/kaityo256/lammps_bulkjob_sample">LAMMPS
                        Bulk Job Sample</a></p>
                        <p>すぐできると思ったが、思ったより時間かかったな。シェルスクリプトの実行時間を知るための<code>SECONDS</code>変数を初めて知った。bashの特殊変数のようだ。zshにもあるみたい。</p>
                        <h2 id="月05日木"><a href="#05">06月05日(木)</a>
                        <a id="05"></a></h2>
                        <p><a
                        href="https://tnishinaga.hatenablog.com/entry/2025/06/04/025151">モダンCMake入門</a></p>
                        <p>CMakeはVer.
                        2.8.xまではディレクトリベースだったが、3.0系からターゲットベースに変更されたらしい。Makefileでもひぃひぃ言ってるのに、CMakeもモダンな書き方が出たとか。</p>
                        <p>あとPythonも最近はpyenvじゃなくてuv使うの？</p>
                        <p>技術の進展が早すぎておいちゃんついていけないよ・・・</p>
                        <p>教授・准教授就任記念講演、明日だったわ。</p>
                        <p>ChatGPTのこと「チャッピー」と呼ぶらしい。</p>
                        <p>チャッピーに論文の英訳させてたら、それまで淡々と英訳してたのが「あなたは不安定領域と言ったけれど、この領域は安定領域じゃないでしょうか？」と訂正してきて震えた(この指摘は正しい)。マジか。</p>
                        <p>久々に予定がほとんどない日。ずっと論文修正。集中力の欠如に苦しんだが、とりあえず結果を修正した。あと残るセクション1つ。頑張る。</p>
                        <h2 id="月04日水"><a href="#04">06月04日(水)</a>
                        <a id="04"></a></h2>
                        <p>物性研にSLATEをインストール。</p>
                        <div class="sourceCode" id="cb1"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--recursive</span> https://github.com/icl-utk-edu/slate.git</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> slate</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-Dblas</span><span class="op">=</span>mkl <span class="at">-Dbuild_tests</span><span class="op">=</span>no <span class="at">-DCMAKE_INSTALL_PREFIX</span><span class="op">=</span>/usr/local</span></code></pre></div>
                        <div class="sourceCode" id="cb2"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> purge</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load oneapi_compiler oneapi_mpi oneapi_mkl</span></code></pre></div>
                        <div class="sourceCode" id="cb3"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mpiicpc <span class="at">--version</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">icpc</span> <span class="er">(</span><span class="ex">ICC</span><span class="kw">)</span> <span class="ex">2021.8.0</span> 20221119</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">C</span><span class="kw">)</span> <span class="ex">1985-2022</span> Intel Corporation.  All rights reserved.</span></code></pre></div>
                        <div class="sourceCode" id="cb4"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">CXX</span><span class="op">=</span>mpiicpc</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FC</span><span class="op">=</span>mpiifort</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-Dblas</span><span class="op">=</span>mkl <span class="at">-Dbuild_tests</span><span class="op">=</span>no <span class="at">-Dgpu_backend</span><span class="op">=</span>none <span class="at">-DCMAKE_INSTALL_PREFIX</span><span class="op">=</span><span class="va">$HOME</span>/usr/local ..</span></code></pre></div>
                        <div class="sourceCode" id="cb5"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>CMake Error at blaspp/CMakeLists.txt:8 (cmake_minimum_required):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  CMake 3.21 or higher is required.  You are running version 3.19.2</span></code></pre></div>
                        <p>CMakeが古いな。自分が入れた古いのを見てた。やりなおし。</p>
                        <div class="sourceCode" id="cb6"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>CMake Error at blaspp/CMakeLists.txt:8 (cmake_minimum_required):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  CMake 3.21 or higher is required.  You are running version 3.20.2</span></code></pre></div>
                        <p>まだ古い。</p>
                        <div class="sourceCode" id="cb7"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://github.com/Kitware/CMake/releases/download/v4.0.2/cmake-4.0.2-linux-x86_64.tar.gz</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> xvzf cmake-4.0.2-linux-x86_64.tar.gz </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> cmake-4.0.2-linux-x86_64/</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> bin/<span class="pp">*</span> ~/usr/local/bin/</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;cp&#39;</span> <span class="at">-r</span> share ~/usr/local</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span>~/usr/local/bin:<span class="va">$PATH</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">CMAKE_ROOT</span><span class="op">=</span>~/usr/local</span></code></pre></div>
                        <div class="sourceCode" id="cb8"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cmake <span class="at">--version</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> version 4.0.2</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="ex">CMake</span> suite maintained and supported by Kitware <span class="er">(</span><span class="ex">kitware.com/cmake</span><span class="kw">)</span><span class="bu">.</span></span></code></pre></div>
                        <p>よろしい。改めて。</p>
                        <div class="sourceCode" id="cb9"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">CXX</span><span class="op">=</span>mpiicpc</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FC</span><span class="op">=</span>mpiifort</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-Dblas</span><span class="op">=</span>mkl <span class="at">-Dbuild_tests</span><span class="op">=</span>no <span class="at">-Dgpu_backend</span><span class="op">=</span>none <span class="at">-DCMAKE_INSTALL_PREFIX</span><span class="op">=</span><span class="va">$HOME</span>/usr/local ..</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span></code></pre></div>
                        <div class="sourceCode" id="cb10"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /opt/intel/oneapi/mpi/2021.8.0/bin/mpiicpc <span class="at">-DSLATE_ID</span><span class="op">=</span><span class="dt">\&quot;</span>f8348a7c<span class="dt">\&quot;</span> <span class="at">-Dslate_EXPORTS</span> <span class="at">-I</span>/home/k0117/k011700/build/slate/include <span class="at">-I</span>/home/k0117/k011700/build/slate/src <span class="at">-I</span>/home/k0117/k011700/build/slate/build/blaspp/include <span class="at">-I</span>/home/k0117/k011700/build/slate/blaspp/include <span class="at">-I</span>/home/k0117/k011700/build/slate/build/lapackpp/include <span class="at">-I</span>/home/k0117/k011700/build/slate/lapackpp/include <span class="at">-std</span><span class="op">=</span>c++17 <span class="at">-fPIC</span> <span class="at">-qopenmp</span> <span class="at">-MD</span> <span class="at">-MT</span> CMakeFiles/slate.dir/src/hemmA.cc.o <span class="at">-MF</span> CMakeFiles/slate.dir/src/hemmA.cc.o.d <span class="at">-o</span> CMakeFiles/slate.dir/src/hemmA.cc.o <span class="at">-c</span> /home/k0117/k011700/build/slate/src/hemmA.cc</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/k0117/k011700/build/slate/src/hemmA.cc</span><span class="er">(</span><span class="ex">305</span><span class="kw">)</span><span class="bu">:</span> error: unsupported lvalue expression on locator-list</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>              <span class="co">#pragma omp task depend(in:gemm[A.nt()-1])</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="ex">^</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>          <span class="ex">detected</span> during instantiation of <span class="st">&quot;void slate::hemmA(blas::Side, scalar_t, slate::HermitianMatrix&lt;scalar_t&gt; &amp;, slate::Matrix&lt;scalar_t&gt; &amp;, scalar_t, slate::Matrix&lt;scalar_t&gt; &amp;, const slate::Options &amp;) [with scalar_t=float]&quot;</span> at line 673</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/k0117/k011700/build/slate/src/hemmA.cc</span><span class="er">(</span><span class="ex">553</span><span class="kw">)</span><span class="bu">:</span> error: unsupported lvalue expression on locator-list</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>              <span class="co">#pragma omp task depend(in:gemm[A.nt()-1])</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="ex">^</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>          <span class="ex">detected</span> during instantiation of <span class="st">&quot;void slate::hemmA(blas::Side, scalar_t, slate::HermitianMatrix&lt;scalar_t&gt; &amp;, slate::Matrix&lt;scalar_t&gt; &amp;, scalar_t, slate::Matrix&lt;scalar_t&gt; &amp;, const slate::Options &amp;) [with scalar_t=float]&quot;</span> at line 673</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="ex">compilation</span> aborted for /home/k0117/k011700/build/slate/src/hemmA.cc <span class="er">(</span><span class="ex">code</span> 2<span class="kw">)</span></span></code></pre></div>
                        <p>エラーだな。</p>
                        <div class="sourceCode" id="cb11"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">g++</span> <span class="at">-DSLATE_ID</span><span class="op">=</span><span class="dt">\&quot;</span>f8348a7c<span class="dt">\&quot;</span> <span class="at">-Dslate_EXPORTS</span> <span class="at">-I</span>/home/k0117/k011700/build/slate/include <span class="at">-I</span>/home/k0117/k011700/build/slate/src <span class="at">-I</span>/home/k0117/k011700/build/slate/build/blaspp/include <span class="at">-I</span>/home/k0117/k011700/build/slate/blaspp/include <span class="at">-I</span>/home/k0117/k011700/build/slate/build/lapackpp/include <span class="at">-I</span>/home/k0117/k011700/build/slate/lapackpp/include <span class="at">-std</span><span class="op">=</span>c++17 <span class="at">-fPIC</span> <span class="at">-fopenmp</span> <span class="at">-MD</span> <span class="at">-MT</span> CMakeFiles/slate.dir/src/hemmA.cc.o <span class="at">-MF</span> CMakeFiles/slate.dir/src/hemmA.cc.o.d <span class="at">-o</span> CMakeFiles/slate.dir/src/hemmA.cc.o <span class="at">-c</span> /home/k0117/k011700/build/slate/src/hemmA.cc</span></code></pre></div>
                        <p>通る。</p>
                        <div class="sourceCode" id="cb12"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--recursive</span> https://github.com/icl-utk-edu/slate.git</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> slate</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">CXX</span><span class="op">=</span>mpicxx</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FC</span><span class="op">=</span>mpiifort</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-Dblas</span><span class="op">=</span>mkl <span class="at">-Dbuild_tests</span><span class="op">=</span>no <span class="at">-Dgpu_backend</span><span class="op">=</span>none <span class="at">-DCMAKE_INSTALL_PREFIX</span><span class="op">=</span><span class="va">$HOME</span>/usr/local ..</span></code></pre></div>
                        <p>一応ビルドは通ったが・・・？</p>
                        <p>等周問題を考えたが、意外に難しい。うーむ。</p>
                        <p>査読した結果が次々返ってくる。他の査読者のコメント、参考になる。</p>
                        <h2 id="月03日火"><a href="#03">06月03日(火)</a>
                        <a id="03"></a></h2>
                        <p>輪講。渡辺解析力学(ハチワレ解析力学)の3章の問題。拘束条件付き変分原理におけるラグランジュの未定乗数の意味とか。</p>
                        <p>分子シミュレーション研究創発センターキックオフミーティング(A)。</p>
                        <p>VS CodeにGoの拡張機能を追加。「Go for Visual
                        Studio Code」かな。</p>
                        <p>インストール後、コマンドパレットから「Go:
                        Install/Update
                        tools」を実行して、現れたツールを全て選んでアップデート。</p>
                        <h2 id="月02日月"><a href="#02">06月02日(月)</a>
                        <a id="02"></a></h2>
                        <p>「やりたいことが多すぎて、でも時間が足りなくて、どうしても『やりたいのにやらないと決めたこと』が出てくるが、どうすればよいか」という質問。いや、どうすれば良いか僕も知りたい。やりたいことが多すぎるのに忙しすぎる。</p>
                        <p>1on1中にお腹が痛くなって、早めに切り上げたい感じが出てしまって申し訳なかった。</p>
                        <p>シミュレーション工学。自分の担当最後。</p>
                        <p>物性研後期申請した。</p>
                        <p>シミュレーション工学のレポートのヒントアップロードした。来年からどうするかなぁ、これ。</p>
                        <h2 id="月01日日"><a href="#01">06月01日(日)</a>
                        <a id="01"></a></h2>
                        <p>もう6月か。いつも月が変わるたびに、何もできないまま月日が流れることに焦る。焦るというか、諦めというか</p>
                        <p>息子の幼馴染の劇を鑑賞しに千葉へ。幼稚園からの付き合い。二人とも大きくなったね。</p>
                        <p>帰りに渋滞に巻き込まれて疲れた。</p>
                        <p>シミュレーション工学の感想の返事書いたり。物性研の申請を書くのはちょっと無理だった。</p>
          </article>
  </body>

  </html>