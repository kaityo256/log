<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
                <title>2025年10月</title>
    <style type="text/css">
      code {
        white-space: pre;
      }
    </style>
        <style type="text/css"></style>

    <link rel="stylesheet" href="style.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- link rel="stylesheet" href="github-markdown.css" type="text/css" / -->
          </head>

  <body>
    <article class="markdown-body">
                        <h1 id="年10月">2025年10月</h1>
                        <h2 id="月20日月"><a href="#20">10月20日(月)</a>
                        <a id="20"></a></h2>
                        <p>招待講演会のアレンジ。</p>
                        <p>GitHub演習で、最近のVSCodeが自動で日本語化を提案しなくなったのを反映。また、講義スライドではなく課題PDFを使うよう指示。</p>
                        <p>GitHub演習。その後研究室見学に大勢きた。</p>
                        <p>論文の査読に返事。再投稿は断念。Reject判定だったが、査読者から多くのフィードバックをもらったので大幅に書き換えて別のところに再チャレンジする。</p>
                        <h2 id="月19日日"><a href="#19">10月19日(日)</a>
                        <a id="19"></a></h2>
                        <p>最近は家でも大学でもわりとトップスピードで仕事しているのでわりとしんどい。</p>
                        <p>GitHub演習の座学第三回、7割くらいレポート採点した。</p>
                        <p>AIの話。なんか最近のBGMはAI作曲のものが多い。なんか主張しすぎないのでBGMにちょうど良い。</p>
                        <p>今はまだBGMにとどまっているが、そのうち小説、漫画、アニメ、映画が全てAI生成可能になるだろう。そして僕が「AI生成のもので良い」と思うようになるだろう。</p>
                        <p>なんとなく怖いというか、悲しい気もするが、僕がエンターテインメントに求めるものがそれくらいなので、仕方ないかもしれない。</p>
                        <h2 id="月18日土"><a href="#18">10月18日(土)</a>
                        <a id="18"></a></h2>
                        <p><a
                        href="https://www.news.uscg.mil/Press-Releases/Article/4265651/coast-guard-marine-board-of-investigation-releases-report-on-titan-submersible/">潜水艇タイタンの事故の最終報告書</a></p>
                        <p>読んでみるといろいろと暗くなる。なんかチャレンジャー号の事故報告を思い出す。</p>
                        <p>プログラミング基礎同演習のレポート採点。どんなに急いでも2時間はかかるな。100人近くいるしなぁ・・・</p>
                        <h2 id="月17日金"><a href="#17">10月17日(金)</a>
                        <a id="17"></a></h2>
                        <p>古いマシンのディスクが圧迫されたの、仮想ハードディスクのせいらしい。これ、ファイルを消すだけではだめで、論理的にファイルを消したあと、なんらかの方法で圧縮しないといけない。</p>
                        <p>マシンの設定続き。</p>
                        <p>Docker Desktopをインストール。</p>
                        <p>X11をインストール。</p>
                        <p>なんか最近のWSLは何もしないでもX11が飛ぶな。lab_startupを修正。</p>
                        <p>あと、何かするたびに「ポロロン」ってうるさいので無効化。</p>
                        <p><code>~/.inputrc</code>を作成して以下を記述。</p>
                        <div class="sourceCode" id="cb1"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> bell-style none</span></code></pre></div>
                        <p>端末再起動か、</p>
                        <div class="sourceCode" id="cb2"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">bind</span> <span class="at">-f</span> ~/.inputrc</span></code></pre></div>
                        <p>で反映。</p>
                        <p>CrowdWalkを生で実行してみる。</p>
                        <p>Macにインストール。JDKをbrewで入れてみる。</p>
                        <div class="sourceCode" id="cb3"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install openjdk@17</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export PATH=&quot;/usr/local/opt/openjdk@17/bin:$PATH&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.zshrc</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export JAVA_HOME=$(/usr/libexec/java_home -v17)&#39;</span> <span class="op">&gt;&gt;</span> ~/.zshrc</span></code></pre></div>
                        <div class="sourceCode" id="cb4"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-version</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">openjdk</span> version <span class="st">&quot;17.0.16&quot;</span> 2025-07-15</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">OpenJDK</span> Runtime Environment Homebrew <span class="er">(</span><span class="ex">build</span> 17.0.16+0<span class="kw">)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">OpenJDK</span> 64-Bit Server VM Homebrew <span class="er">(</span><span class="ex">build</span> 17.0.16+0, mixed mode, sharing<span class="kw">)</span></span></code></pre></div>
                        <p>OK。</p>
                        <div class="sourceCode" id="cb5"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> github</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/crest-cassia/CrowdWalk.git</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/CrowdWalk/crowdwalk</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ex">./gradlew</span></span></code></pre></div>
                        <p>クラッシュした。Open
                        JDKにはJavaFXがバンドルされていないかららしい。</p>
                        <div class="sourceCode" id="cb6"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> uninstall openjdk@17</span></code></pre></div>
                        <p>大人しくLiberica JDK 17
                        x86をインストールする。</p>
                        <div class="sourceCode" id="cb7"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> tap bell-sw/liberica</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install <span class="at">--cask</span> liberica-jdk17-full</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JAVA_HOME</span><span class="op">=</span><span class="st">&quot;/Library/Java/JavaVirtualMachines/liberica-jdk-17-full.jdk/Contents/Home&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$JAVA_HOME</span><span class="st">/bin:</span><span class="va">$PATH</span><span class="st">&quot;</span></span></code></pre></div>
                        <div class="sourceCode" id="cb8"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">--list-modules</span> <span class="kw">|</span> <span class="fu">grep</span> javafx</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.base@17.0.16</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.controls@17.0.16</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.fxml@17.0.16</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.graphics@17.0.16</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.media@17.0.16</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.swing@17.0.16</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="ex">javafx.web@17.0.16</span></span></code></pre></div>
                        <p>できた。JavaFXが必要だったらしい。</p>
                        <p>Ubuntuの場合。</p>
                        <div class="sourceCode" id="cb9"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="at">-q</span> <span class="at">-O</span> <span class="at">-</span> https://download.bell-sw.com/pki/GPG-KEY-bellsoft <span class="kw">|</span> <span class="fu">sudo</span> apt-key add <span class="at">-</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;deb [arch=amd64] https://apt.bell-sw.com/ stable main&quot;</span> <span class="kw">|</span> <span class="fu">sudo</span> tee /etc/apt/sources.list.d/bellsoft.list</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install bellsoft-java17-full</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JAVA_HOME</span><span class="op">=</span>/usr/lib/jvm/bellsoft-java17-full-amd64</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="va">$JAVA_HOME</span>/bin:<span class="va">$PATH</span></span></code></pre></div>
                        <p>full版をインストールしないとJavaFXが含まれない。</p>
                        <p>だが動作しない。WSL経由ではOpenGLの3D表示がうまくいかないようだ。ネイティブじゃないと駄目か。</p>
                        <p>ヘッドセットが壊れたのでAmazon
                        Businessで注文。</p>
                        <p>GitHub演習。K-LMSにあるパワーポイントのスライドのPDFが古かった。いろいろ直したつもりだったのだが、そこを直し忘れたか。</p>
                        <p>結局、DockerやWSLなどの仮想環境では無理っぽいな。</p>
                        <h2 id="月16日木"><a href="#16">10月16日(木)</a>
                        <a id="16"></a></h2>
                        <p>一応メモ。</p>
                        <p>ある大学のキャッチコピーに「I am
                        I.」と書いてあり、それが文法的におかしい、さすがFランみたいなつぶやきを見かけた。実はI
                        am
                        I.というのは(少し古めかしく聞こえるが)文法的に正しい。</p>
                        <p>リチャード三世のAct 5,
                        シーン5にこんな記述がある。</p>
                        <blockquote>
                        <p>The lights burn blue. It is now dead
                        midnight. Cold fearful drops stand on my
                        trembling flesh. What do I fear? Myself? There’s
                        none else by. Richard loves Richard; that is,
                        <strong>I am I</strong>. Is there a murderer
                        here? No. Yes, I am. Then fly! What, from
                        myself? Great reason. Why: Lest I revenge.
                        Myself upon myself? Alack, I love myself.
                        Wherefore? For any good That I myself have done
                        unto myself? O no, alas, I rather hate myself
                        For hateful deeds committed by myself. I am a
                        villain.</p>
                        </blockquote>
                        <p><a
                        href="https://shakespeare.mit.edu/john/full.html">King
                        John</a>にもある。</p>
                        <blockquote>
                        <p>Madam, by chance but not by truth; what
                        though? Something about, a little from the
                        right, In at the window, or else o’er the hatch:
                        Who dares not stir by day must walk by
                        &gt;night, And have is have, however men do
                        catch: Near or far off, well won is still well
                        shot, And <strong>I am I</strong>, howe’er I was
                        begot.</p>
                        </blockquote>
                        <p>あとは、オクスフォード大学の神学教授、Henry
                        Scott Hollandによる「Death Is Nothing At
                        All」にも</p>
                        <blockquote>
                        <p>Everything remains exactly as it was.
                        <strong>I am I</strong>, and you are you, and
                        the old life that we lived so fondly together is
                        untouched, unchanged. Whatever we were to each
                        other, that we are still.</p>
                        </blockquote>
                        <p>という用例が見られる。</p>
                        <p>まぁ、「Fラン」とバカにした人に教養がなかったというだけの話なんだけど、人を馬鹿にするのはやめようね。</p>
                        <p>Tahoeになってから、ウィンドウに切り替わりが遅い。具体的には、ブラウザからVSCodeに切り替える時に1秒くらい固まることがある。</p>
                        <p>これ、どうもElectronの問題らしい。少なくとも、GPUの利用率が100%近くなる問題があったらしい。しかし、迅速なバージョンアップにより修正されたはず。しかし、まだ重いな。</p>
                        <p>Electron製のアプリに影響するので、VS
                        CodeやSlackなどが影響を受けるっぽい。うーむ。</p>
                        <p>普段使いのWindows
                        PCのディスク容量が足りずに不具合がおき始めた。いろいろアプリをアンインストールしてもだめ。</p>
                        <p>わかった。仮想記憶領域vhdファイルが大きくなりすぎてるんだ。vhdを圧縮しても小さくならない。</p>
                        <p>急遽、異なるPCのセットアップに入る。うーん。</p>
                        <p>以下、メモ：</p>
                        <ul>
                        <li>Google Chrome インストール</li>
                        <li>PowerShellで
                        <code>wsl --install</code>再起動</li>
                        <li>Microsoft StoreでUbuntu
                        24.04をインストール</li>
                        <li>Subversionのインストール</li>
                        </ul>
                        <div class="sourceCode" id="cb10"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt upgrade <span class="at">-y</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> subversion</span></code></pre></div>
                        <p>公開鍵を登録し、すぐにサーバからリポジトリを一括でcheckout。いまどきSubversion管理・・・と思わなくはないが、研究教育関連が全部一つのリポジトリに突っ込んであるので、こうして一括で復活できるのは楽だ。</p>
                        <ul>
                        <li>Microsoft 365をインストール。</li>
                        <li>Adobe
                        Readerをインストール(あまり入れたくないのだが)。</li>
                        <li>VSCodeをインストール</li>
                        <li>Git for Windowsをインストール</li>
                        </ul>
                        <p>UbuntuとGit Bashの公開鍵をGitHubに登録。</p>
                        <p>GitHubでパスキーQRコードをスマホで撮影してもサポートされていないと表示される原因がわかった。スマホの写真アプリではダメで、Google
                        Lensを使う必要があった。</p>
                        <p>とりあえず新しいWindows
                        PCセットアップ完了。明日の講義に間に合った・・・</p>
                        <p>そして論文修正ができてない・・・</p>
                        <h2 id="月15日水"><a href="#15">10月15日(水)</a>
                        <a id="15"></a></h2>
                        <p>GitHub演習のレポート採点続き。まずは座学第一回が終わった。</p>
                        <p>研究室ミーティング。</p>
                        <p>GitHub演習のレポート採点続き。座学第二回も終わった。</p>
                        <p>論文査読対応まで手が回らない・・・</p>
                        <h2 id="月14日火"><a href="#13">10月14日(火)</a>
                        <a id="13"></a></h2>
                        <p>プログラミング基礎同演習第二回。</p>
                        <p>論文の査読返ってきた。Reject…orz</p>
                        <p>しかし、とても丁寧なレポートが返ってきたので、ちゃんと修正して別のところに出そう。</p>
                        <p>GitHub演習のレポート採点。</p>
                        <h2 id="月13日月"><a href="#13">10月13日(月)</a>
                        <a id="13"></a></h2>
                        <p>リモート作業中にうっかり、</p>
                        <div class="sourceCode" id="cb11"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con down eno1</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con up eno1</span></code></pre></div>
                        <p>をやってしまって接続が切れたノード、物理ログインしてリブートしたら固定IPだけになった。そして、ypbindが走ってるので/homeでpermission
                        denied。まず固定IPを指定してリブート、が最初の作業だな。</p>
                        <p>まずはNFSのマウント確認。</p>
                        <div class="sourceCode" id="cb12"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo mount <span class="at">-t</span> nfs 192.168.1.20:/home /mnt/home_nfs</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Created</span> symlink /run/systemd/system/remote-fs.target.wants/rpc-statd.service → /usr/lib/systemd/system/rpc-statd.service.</span></code></pre></div>
                        <p>この状態で、</p>
                        <div class="sourceCode" id="cb13"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-bash:</span> cd: /home/watanabe: 許可がありません</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd /mnt/home_nfs/watanabe/</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> </span></code></pre></div>
                        <p>NISでアカウント共有しているので、/homeはpermission
                        deniedだが、/mnt/home_nfs/watanabe/はちゃんと見れる。正しくNIS共有+NFSできてますね。よしよし。</p>
                        <div class="sourceCode" id="cb14"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> umount /mnt/home_nfs/</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mount <span class="at">-t</span> nfs 192.168.1.20:/home /home</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span></span></code></pre></div>
                        <p>/home通った。dfで確認。</p>
                        <div class="sourceCode" id="cb15"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> df <span class="kw">|</span> <span class="fu">grep</span> home</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">192.168.1.20:/home</span>  46872928256 27035027456 19837900800   58% /home</span></code></pre></div>
                        <p>よしよし。<code>/etc/fstab</code>を以下のように修正。</p>
                        <div class="sourceCode" id="cb16"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/dev/mapper/rl-root</span>     /                       xfs     defaults        0 0</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="va">UUID</span><span class="op">=</span>1a0defb8-f376-4254-8e56-3a9a9cbe949f <span class="ex">/boot</span>                   xfs     defaults        0 0</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="va">UUID</span><span class="op">=</span>DD5A-1F2D          <span class="ex">/boot/efi</span>               vfat    umask=0077,shortname=winnt 0 2</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#/dev/mapper/rl-home     /home                   xfs     defaults        0 0</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/dev/mapper/rl-swap</span>     none                    swap    defaults        0 0</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="ex">192.168.1.20:/home</span>      /home                   nfs     defaults,_netdev  0  0</span></code></pre></div>
                        <p>リブート。ここまでで、</p>
                        <ul>
                        <li>ホストベース認証</li>
                        <li>NIS共有</li>
                        <li>NFS</li>
                        </ul>
                        <p>まで通った。</p>
                        <p>次、slurmのインストール(クライアント)。</p>
                        <p><code>/etc/selinux/config</code>で</p>
                        <div class="sourceCode" id="cb17"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="va">SELINUX</span><span class="op">=</span>disabled</span></code></pre></div>
                        <p>にしてからreboot。</p>
                        <p>mungeのインストール</p>
                        <div class="sourceCode" id="cb18"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf <span class="at">-y</span> install munge</span></code></pre></div>
                        <p>リブートしたら外に繋がらんくなった。なんでだよ・・・</p>
                        <p>yagami02のdefault
                        gatewayが192.168.1.2なのに、yagami03が192.168.1.1になってた。コマンド履歴を見ると192.168.1.2を指定しているんだけどなぁ。</p>
                        <div class="sourceCode" id="cb19"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ip route del default</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ip route add default via 192.168.1.2 dev eno1</span></code></pre></div>
                        <p>により通ったので、</p>
                        <div class="sourceCode" id="cb20"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con mod eno1 ipv4.gateway <span class="st">&quot;192.168.1.2&quot;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con up eno1</span></code></pre></div>
                        <p>で永続化。</p>
                        <p>あと、nameserverはNetworkManagerが自動生成するので、/etc/resolv.confを手で書いても上書きされてしまう。</p>
                        <div class="sourceCode" id="cb21"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con mod eno1 ipv4.dns <span class="st">&quot;1.1.1.1&quot;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart NetworkManager</span></code></pre></div>
                        <p>これで/etc/resolv.confが修正されていることを確認。</p>
                        <p>改めてmungeのインストール。</p>
                        <p>ログインノードから計算ノードにmunge.keyのコピーをする必要があるが、/homeを共有しているのでそこを経由して。</p>
                        <div class="sourceCode" id="cb22"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp /etc/munge/munge.key .</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp munge.key /etc/munge/</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown munge:munge /etc/munge/munge.key</span></code></pre></div>
                        <p>追記：chownを忘れてた</p>
                        <div class="sourceCode" id="cb23"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install slurm slurm-slurmd munge</span></code></pre></div>
                        <p>slurm.confにyagami03を追加。</p>
                        <p>ログインノードのslurm.confを/home経由でコピー。</p>
                        <div class="sourceCode" id="cb24"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp slurm.conf /etc/slurm/</span></code></pre></div>
                        <p>計算ノードは6818をあける必要がある。</p>
                        <div class="sourceCode" id="cb25"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>6818/tcp</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart firewalld</span></code></pre></div>
                        <p>追記：firewallの再起動を忘れて、つながらなかった。</p>
                        <p>ディレクトリの作成と所有者の修正。</p>
                        <div class="sourceCode" id="cb26"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir <span class="at">-p</span> /var/spool/slurm/d /var/log/slurm /var/run/slurm</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown <span class="at">-R</span> slurm:slurm /var/spool/slurm /var/log/slurm /var/run/slurm</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 755 /var/spool/slurm /var/log/slurm /var/run/slurm</span></code></pre></div>
                        <p>mungeとslurmdを起動。自動起動も追加。</p>
                        <div class="sourceCode" id="cb27"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start munge</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start slurmd</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> munge</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> slurmd</span></code></pre></div>
                        <p>ログインノードで、slurmdctldの再起動。</p>
                        <div class="sourceCode" id="cb28"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart slurmctld</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> scontrol reconfigure</span></code></pre></div>
                        <p>sinfoで確認。OK。</p>
                        <p>その後yagami03を再起動したらまた死んだ。</p>
                        <div class="sourceCode" id="cb29"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> munge</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> slurmd</span></code></pre></div>
                        <p>を設定して自動起動をONにしていなかったのが原因。起動してからログインノードで以下を実行したら復活。</p>
                        <div class="sourceCode" id="cb30"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> scontrol update nodename=yagami03.appi.keio.ac.jp state=resume</span></code></pre></div>
                        <p>新たにyagami01をセットアップ。今度こそ手順完全版を作る。</p>
                        <p>USBでRockey Linux 9.6をインストール</p>
                        <p><code>/etc/hosts</code>の内容をyagami02からコピー</p>
                        <p>ホスト名の設定。</p>
                        <div class="sourceCode" id="cb31"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> hostnamectl set-hostname yagami01</span></code></pre></div>
                        <p>これで<code>hostname</code>と<code>hostname -f</code>が想定通りになることを確認。</p>
                        <p>固定IPをふり、かつDNSやDefault GWを設定。</p>
                        <div class="sourceCode" id="cb32"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.addresses 192.168.1.11/24</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.gateway 192.168.1.2</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.dns <span class="st">&quot;1.1.1.1&quot;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.method manual</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv6.method ignore</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection up eno1</span></code></pre></div>
                        <p>を実行してから念のためreboot(NetworkManagerだけで良いかもしれないが、接続中だと変な設定が残ることがあるので)。</p>
                        <p>ホストベース認証。</p>
                        <p>まずはSELinuxを無効に。</p>
                        <div class="sourceCode" id="cb33"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> setenforce 0</span></code></pre></div>
                        <div class="sourceCode" id="cb34"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> vim /etc/selinux/config</span></code></pre></div>
                        <p>で、</p>
                        <div class="sourceCode" id="cb35"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="va">SELINUX</span><span class="op">=</span>disabled</span></code></pre></div>
                        <p>に。</p>
                        <p>ログインノード側で</p>
                        <div class="sourceCode" id="cb36"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keyscan</span> <span class="at">-t</span> ed25519 yagami01 <span class="kw">|</span> <span class="fu">sudo</span> tee <span class="at">-a</span> /etc/ssh/ssh_known_hosts</span></code></pre></div>
                        <p>計算ノード側で、</p>
                        <div class="sourceCode" id="cb37"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keyscan</span> <span class="at">-t</span> ed25519 watanabe-login.appi.keio.ac.jp <span class="kw">|</span> <span class="fu">sudo</span> tee <span class="at">-a</span> /etc/ssh/ssh_known_hosts</span></code></pre></div>
                        <p><code>/etc/ssh/shosts.equiv</code>を以下の内容に。</p>
                        <div class="sourceCode" id="cb38"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watanabe-login.appi.keio.ac.jp</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="ex">yagami01</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="ex">yagami02</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="ex">yagami03</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="ex">yagami04</span></span></code></pre></div>
                        <p><code>/etc/ssh/sshd_config</code>を以下のように修正。</p>
                        <div class="sourceCode" id="cb39"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>HostKey /etc/ssh/ssh_host_ed25519_key</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>IgnoreUserKnownHosts no</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>HostbasedAuthentication yes</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>UseDNS yes</span></code></pre></div>
                        <p>計算ノードに2222を開けてsshdを2222で起動。</p>
                        <div class="sourceCode" id="cb40"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--add-port</span><span class="op">=</span>2222/tcp</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /usr/sbin/sshd <span class="at">-d</span> <span class="at">-p</span> 2222</span></code></pre></div>
                        <p>ログインノードから接続確認。</p>
                        <div class="sourceCode" id="cb41"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-o</span> PreferredAuthentications=hostbased yagami01 <span class="at">-p</span> 2222</span></code></pre></div>
                        <p>接続できたら、計算ノードでsshdをrestart。</p>
                        <div class="sourceCode" id="cb42"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart sshd</span></code></pre></div>
                        <p>ログインノードから通常ポートで接続。</p>
                        <div class="sourceCode" id="cb43"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-o</span> PreferredAuthentications=hostbased yagami01</span></code></pre></div>
                        <p>接続できたらホストベース認証完成。</p>
                        <p>次、NISの設定。</p>
                        <p>DNFのアップデート。</p>
                        <div class="sourceCode" id="cb44"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf update <span class="at">-y</span></span></code></pre></div>
                        <p>別ノードで作った以下の3つのRPMをコピーしてインストール。</p>
                        <div class="sourceCode" id="cb45"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> yagami03:build/<span class="pp">*</span>.rpm .</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf localinstall <span class="at">-y</span> ~/build/ypbind-2.7.2-2.el9.x86_64.rpm ~/build/nss_nis-3.2-8.el9.x86_64.rpm ~/build/yp-tools-4.2.3-2.el9.x86_64.rpm</span></code></pre></div>
                        <p><code>/etc/yum.conf</code>に以下を追加。</p>
                        <div class="sourceCode" id="cb46"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>exclude=ypbind nss_nis yp-tools authselect-libs autofs</span></code></pre></div>
                        <div class="sourceCode" id="cb47"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ypdomainname watanabe-group</span></code></pre></div>
                        <p><code>/etc/yp.conf</code>を以下のように修正。</p>
                        <div class="sourceCode" id="cb48"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>domain watanabe-group server watanabe-login</span></code></pre></div>
                        <p>ypbind起動。</p>
                        <div class="sourceCode" id="cb49"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start ypbind</span></code></pre></div>
                        <div class="sourceCode" id="cb50"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ypwhich</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">watanabe-login</span></span></code></pre></div>
                        <p><code>/etc/nsswitch.conf</code>をNISを先に見るように直接編集。</p>
                        <div class="sourceCode" id="cb51"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">passwd:</span>     nis files sss systemd</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="ex">group:</span>      nis files <span class="pp">[</span><span class="ss">SUCCESS=merge</span><span class="pp">]</span> sss <span class="pp">[</span><span class="ss">SUCCESS=merge</span><span class="pp">]</span> systemd</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="ex">shadow:</span>     nis files</span></code></pre></div>
                        <p>getentが通ることを確認。</p>
                        <div class="sourceCode" id="cb52"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getent</span> passwd 適当なユーザ名</span></code></pre></div>
                        <p>通った。</p>
                        <p>次、NFS。</p>
                        <div class="sourceCode" id="cb53"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> nfs-utils</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir <span class="at">-p</span> /mnt/home_nfs</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mount <span class="at">-t</span> nfs 192.168.1.20:/home /mnt/home_nfs</span></code></pre></div>
                        <p>これでマウントできることを確認。</p>
                        <div class="sourceCode" id="cb54"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> umount /mnt/home_nfs</span></code></pre></div>
                        <p><code>/etc/fstab</code>を以下のように修正。</p>
                        <div class="sourceCode" id="cb55"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>/dev/mapper/rl-root     /                       xfs     defaults        0 0</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>UUID=d35febed-3269-4ca5-b494-27d11a2d387f /boot                   xfs     defaults        0 0</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>UUID=9032-A23D          /boot/efi               vfat    umask=0077,shortname=winnt 0 2</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>#/dev/mapper/rl-home     /home                   xfs     defaults        0 0</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>/dev/mapper/rl-swap     none                    swap    defaults        0 0</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>192.168.1.20:/home      /home                   nfs     defaults,_netdev  0  0</span></code></pre></div>
                        <p>リブート。<code>/home/</code>が正しくマウントできた。</p>
                        <p>次、slurm。</p>
                        <p>mungeのインストール。</p>
                        <div class="sourceCode" id="cb56"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf <span class="at">-y</span> install munge</span></code></pre></div>
                        <p>既に/homeにmunge.keyがあるので共有。</p>
                        <div class="sourceCode" id="cb57"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp munge.key /etc/munge/</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown munge:munge /etc/munge/munge.key</span></code></pre></div>
                        <p>Slurmのインストール。</p>
                        <div class="sourceCode" id="cb58"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf groupinstall <span class="st">&quot;Development Tools&quot;</span> <span class="at">-y</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> epel-release</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> slurm slurm-slurmd</span></code></pre></div>
                        <p>ログインノードの/etc/slurm/slurm.confにyagami01を追加。</p>
                        <div class="sourceCode" id="cb59"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a># COMPUTE NODES</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>NodeName=watanabe-login.appi.keio.ac.jp CPUs=20 State=UNKNOWN</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>NodeName=yagami01.appi.keio.ac.jp CPUs=20 State=UNKNOWN</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>NodeName=yagami02.appi.keio.ac.jp CPUs=20 State=UNKNOWN</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>NodeName=yagami03.appi.keio.ac.jp CPUs=20 State=UNKNOWN</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>PartitionName=main Nodes=ALL Default=YES MaxTime=1-00:00:00 State=UP</span></code></pre></div>
                        <p>ログインノードで/homeにコピー。</p>
                        <div class="sourceCode" id="cb60"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp /etc/slurm/slurm.conf .</span></code></pre></div>
                        <p>計算ノードでローカルにコピー。</p>
                        <div class="sourceCode" id="cb61"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp slurm.conf /etc/slurm/</span></code></pre></div>
                        <p>6818をあける。</p>
                        <div class="sourceCode" id="cb62"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>6818/tcp</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart firewalld</span></code></pre></div>
                        <p>slurmユーザの作成。</p>
                        <div class="sourceCode" id="cb63"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> groupadd <span class="at">-g</span> 64030 slurm</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> useradd <span class="at">-u</span> 64030 <span class="at">-g</span> slurm <span class="at">-m</span> <span class="at">-d</span> /var/lib/slurm <span class="at">-s</span> /sbin/nologin <span class="at">-r</span> slurm</span></code></pre></div>
                        <div class="sourceCode" id="cb64"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir <span class="at">-p</span> /var/spool/slurm/d /var/log/slurm /var/run/slurm</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown <span class="at">-R</span> slurm:slurm /var/spool/slurm /var/log/slurm /var/run/slurm</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 755 /var/spool/slurm /var/log/slurm /var/run/slurm</span></code></pre></div>
                        <p>mungeとslurmdを起動。</p>
                        <div class="sourceCode" id="cb65"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> munge</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> slurmd</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start munge</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start slurmd</span></code></pre></div>
                        <p>計算ノードでslurmctldを再起動して再読み込み。</p>
                        <div class="sourceCode" id="cb66"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart slurmctld</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> scontrol reconfigure</span></code></pre></div>
                        <p>計算ノードを認識した。</p>
                        <p>あとはすべての計算ノードで、</p>
                        <div class="sourceCode" id="cb67"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> openmpi openmpi-devel</span></code></pre></div>
                        <p>とかやってから、/etc/bashrcに</p>
                        <div class="sourceCode" id="cb68"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span>/usr/lib64/openmpi/bin:<span class="va">$PATH</span></span></code></pre></div>
                        <p>を追加しないとmpirunにパスが通らない。</p>
                        <div class="sourceCode" id="cb69"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="va">$PATH</span>:/home/apps/lammps</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mpirun</span> <span class="at">-np</span> 20 lmp <span class="op">&lt;</span> collision.input </span></code></pre></div>
                        <p>が全てのノードで通ることを確認。
                        終わったぞ〜！！！</p>
                        <p>もう一つの懸案だった、学科ウェブに学生さんの受賞情報を掲載するのもやった。</p>
                        <h2 id="月12日日"><a href="#12">10月12日(日)</a>
                        <a id="12"></a></h2>
                        <p>子どものスマホを契約。契約にすげー時間がかかった上、その後の設定にもすげー時間がかかって消耗・・・</p>
                        <p>疲れて今日はレポートの採点ができなかった・・・</p>
                        <h2 id="月11日土"><a href="#11">10月11日(土)</a>
                        <a id="11"></a></h2>
                        <p>会議とか。</p>
                        <p>プログラミング基礎同演習のレポート採点。すげー時間かかったな。</p>
                        <h2 id="月10日金"><a href="#10">10月10日(金)</a>
                        <a id="10"></a></h2>
                        <p>故障したサーバにRockeyを入れ直す。別の計算ノードでバージョン確認。</p>
                        <div class="sourceCode" id="cb70"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat /etc/redhat-release </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Rocky</span> Linux release 9.6 <span class="er">(</span><span class="ex">Blue</span> Onyx<span class="kw">)</span></span></code></pre></div>
                        <p>9.6ですね。</p>
                        <p>MacのターミナルからRockey Linux release
                        9.6のブータブルUSBを作ろうとしたが、ddを使ったりして危ないな。
                        ChatGPTにBalena
                        Etcherというのを紹介されたが、ここは大人しくWindowsでRufasを使うか。</p>
                        <p><a
                        href="https://rufus.ie/ja/">https://rufus.ie/ja/</a>からRufasをダウンロード。</p>
                        <p><a
                        href="https://download.rockylinux.org/pub/rocky/9/isos/x86_64/Rocky-9.6-x86_64-dvd.iso">Rocky-9.6-x86_64-dvd.iso</a>をダウンロード、しようとしたが、公式サイトからは重すぎる。</p>
                        <p><a
                        href="https://ftp.riken.jp/Linux/rocky/9.6/isos/x86_64/">理研のミラー</a>からダウンロード。</p>
                        <p>作業ログ。</p>
                        <ul>
                        <li><p>USBブートして計算ノードにRockeyを再インストール。</p></li>
                        <li><p>rootパスワード指定</p></li>
                        <li><p>インストール終了後再起動。USBを抜く。</p></li>
                        <li><p>起動後、最初に自分のユーザアカウントを追加</p></li>
                        <li><p>自分をsudoersに追加</p></li>
                        <li><p>ホスト名の設定</p>
                        <div class="sourceCode" id="cb71"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> hostnamectl</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Static</span> hostname: <span class="er">(</span><span class="bu">unset</span><span class="kw">)</span>                           </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Transient</span> hostname: localhost</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>        <span class="ex">Icon</span> name: computer-server</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>          <span class="ex">Chassis:</span> server 🖳</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>        <span class="ex">Machine</span> ID: 203813d2d4d548c5a2fa0799e8e79eaf</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>          <span class="ex">Boot</span> ID: ff05f843ffa64940916e346d133e6e97</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Operating</span> System: Rocky Linux 9.6 <span class="er">(</span><span class="ex">Blue</span> Onyx<span class="kw">)</span>       </span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>      <span class="ex">CPE</span> OS Name: cpe:/o:rocky:rocky:9::baseos</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>            <span class="ex">Kernel:</span> Linux 5.14.0-570.17.1.el9_6.x86_64</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>      <span class="ex">Architecture:</span> x86-64</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Hardware</span> Vendor: Dell Inc.</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Hardware</span> Model: PowerEdge R640</span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Firmware</span> Version: 2.8.1</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo hostnamectl set-hostname yagami03</span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> hostnamectl</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a><span class="ex">Static</span> hostname: yagami03</span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>      <span class="ex">Icon</span> name: computer-server</span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>        <span class="ex">Chassis:</span> server 🖳</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>      <span class="ex">Machine</span> ID: 203813d2d4d548c5a2fa0799e8e79eaf</span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>        <span class="ex">Boot</span> ID: ff05f843ffa64940916e346d133e6e97</span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a><span class="ex">Operating</span> System: Rocky Linux 9.6 <span class="er">(</span><span class="ex">Blue</span> Onyx<span class="kw">)</span>       </span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>    <span class="ex">CPE</span> OS Name: cpe:/o:rocky:rocky:9::baseos</span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a>          <span class="ex">Kernel:</span> Linux 5.14.0-570.17.1.el9_6.x86_64</span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Architecture:</span> x86-64</span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a><span class="ex">Hardware</span> Vendor: Dell Inc.</span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Hardware</span> Model: PowerEdge R640</span>
<span id="cb71-30"><a href="#cb71-30" aria-hidden="true" tabindex="-1"></a><span class="ex">Firmware</span> Version: 2.8.1</span></code></pre></div>
                        <p><code>hostnamectl</code>で現状確認、<code>hostnamectl set-hostname</code>で名前設定。</p></li>
                        <li><p>ネットワークを固定IPに。</p>
                        <ul>
                        <li><code>nmcli connection show</code>で現状確認。</li>
                        </ul>
                        <div class="sourceCode" id="cb72"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nmcli connection show</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="ex">NAME</span>  UUID                                  TYPE      DEVICE </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="ex">eno1</span>  97a43ef0-4f9d-39ba-b999-8213ca8b2f38  ethernet  eno1   </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="ex">lo</span>    9e831b82-81ee-4317-b89e-1faf308b3e3b  loopback  lo     </span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="ex">eno2</span>  ae6e89b9-e5aa-462e-b45f-dcf149d13056  ethernet  <span class="at">--</span>     </span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="ex">eno3</span>  46292068-2837-4836-916d-9b4477bf5b68  ethernet  <span class="at">--</span>     </span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="ex">eno4</span>  fc161a70-08b3-4f82-ab17-d2f854f084b6  ethernet  <span class="at">--</span> </span></code></pre></div>
                        <ul>
                        <li>DEVICEに出てきたのでeno1で接続していることがわかる。</li>
                        <li>eno1に192.168.1.13を設定(192.168.1.12を参考に)</li>
                        </ul>
                        <div class="sourceCode" id="cb73"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.addresses 192.168.1.13/24</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.gateway 192.168.1.2</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.dns <span class="st">&quot;1.1.1.1&quot;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv4.method manual</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli connection modify eno1 ipv6.method ignore</span></code></pre></div>
                        <ul>
                        <li>ネットワーク再起動</li>
                        </ul>
                        <div class="sourceCode" id="cb74"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart NetworkManager</span></code></pre></div>
                        <ul>
                        <li>別窓から新しいIPで接続して成功したことを確認。</li>
                        </ul></li>
                        <li><p>NISのインストールをソースから</p>
                        <ul>
                        <li>Gitのインストール</li>
                        </ul>
                        <div class="sourceCode" id="cb75"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf update <span class="at">-y</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> git</span></code></pre></div>
                        <ul>
                        <li><a
                        href="https://web.chaperone.jp/w/index.php?NIS/rockylinux9">ここ</a>の通りに実行</li>
                        </ul>
                        <div class="sourceCode" id="cb76"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/thkukuk/ypbind-mt</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ypbind-mt</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout v2.7.2</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ..</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">--exclude-vcs</span> <span class="at">--transform</span> <span class="st">&#39;s/ypbind-mt/ypbind-mt-2.7.2/&#39;</span> <span class="at">-cvzf</span> ypbind-mt-2.7.2.tar.gz ypbind-mt</span></code></pre></div>
                        <p>これで<code>ypbind-mt-2.7.2.tar.gz</code>が作られる。</p>
                        <ul>
                        <li>ypbindの作成</li>
                        </ul>
                        <div class="sourceCode" id="cb77"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> http://dl.rockylinux.org/pub/rocky/8/AppStream/source/tree/Packages/y/ypbind-2.5-2.el8.src.rpm</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="ex">rpm</span> <span class="at">-Uvh</span> ypbind-2.5-2.el8.src.rpm</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">vi</span> ~/rpmbuild/SPECS/ypbind.spec <span class="co"># ブログ記事を参考に修正</span></span></code></pre></div>
                        <div class="sourceCode" id="cb78"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> <span class="at">--enablerepo</span><span class="op">=</span>devel install <span class="at">-y</span> dbus-glib-devel libnsl2-devel libtirpc-devel systemd-devel</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ypbind-mt-2.7.2.tar.gz ~/rpmbuild/SOURCES/</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> rpm-build</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> autoconf automake gettext-devel docbook-style-xsl</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf groupinstall <span class="at">-y</span> <span class="st">&quot;Development Tools&quot;</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="ex">rpmbuild</span> <span class="at">-bb</span> ~/rpmbuild/SPECS/ypbind.spec</span></code></pre></div>
                        <ul>
                        <li>nss_nis</li>
                        </ul>
                        <div class="sourceCode" id="cb79"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/thkukuk/libnss_nis</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> libnss_nis</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout v3.2</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ..</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">--exclude-vcs</span> <span class="at">--transform</span> <span class="st">&#39;s/libnss_nis/libnss_nis-3.2/&#39;</span> <span class="at">-cvzf</span> libnss_nis-3.2.tar.gz libnss_nis</span></code></pre></div>
                        <p>ibnss_nis-3.2.tar.gzができる。</p>
                        <ul>
                        <li>rpm作成</li>
                        </ul>
                        <div class="sourceCode" id="cb80"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> http://dl.rockylinux.org/pub/rocky/8/BaseOS/source/tree/Packages/n/nss_nis-3.0-8.el8.src.rpm</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="ex">rpm</span> <span class="at">-Uvh</span> nss_nis-3.0-8.el8.src.rpm</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="fu">vi</span> ~/rpmbuild/SPECS/nss_nis.spec  <span class="co"># ブログ記事を参考に修正</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> libnss_nis-3.2.tar.gz ~/rpmbuild/SOURCES/</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="ex">rpmbuild</span> <span class="at">-bb</span> ~/rpmbuild/SPECS/nss_nis.spec</span></code></pre></div>
                        <p>できたかどうか確認。</p>
                        <div class="sourceCode" id="cb81"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls ~/rpmbuild/RPMS/x86_64/nss_nis-<span class="pp">*</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/watanabe/rpmbuild/RPMS/x86_64/nss_nis-3.2-8.el9.x86_64.rpm</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/watanabe/rpmbuild/RPMS/x86_64/nss_nis-debuginfo-3.2-8.el9.x86_64.rpm</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/watanabe/rpmbuild/RPMS/x86_64/nss_nis-debugsource-3.2-8.el9.x86_64.rpm</span></span></code></pre></div>
                        <ul>
                        <li>yp-tools</li>
                        </ul>
                        <div class="sourceCode" id="cb82"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> http://dl.rockylinux.org/pub/rocky/8/AppStream/source/tree/Packages/y/yp-tools-4.2.3-2.el8.src.rpm</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="ex">rpmbuild</span> <span class="at">--rebuild</span> yp-tools-4.2.3-2.el8.src.rpm</span></code></pre></div>
                        <p>できたかどうか確認</p>
                        <div class="sourceCode" id="cb83"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls ~/rpmbuild/RPMS/x86_64/yp-tools-<span class="pp">*</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/watanabe/rpmbuild/RPMS/x86_64/yp-tools-4.2.3-2.el9.x86_64.rpm</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/watanabe/rpmbuild/RPMS/x86_64/yp-tools-debuginfo-4.2.3-2.el9.x86_64.rpm</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/watanabe/rpmbuild/RPMS/x86_64/yp-tools-debugsource-4.2.3-2.el9.x86_64.rpm</span></span></code></pre></div>
                        <ul>
                        <li>できたRPMのインストール。</li>
                        </ul>
                        <div class="sourceCode" id="cb84"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf localinstall <span class="at">-y</span> ~/rpmbuild/RPMS/x86_64/ypbind-2.7.2-2.el9.x86_64.rpm ~/rpmbuild/RPMS/x86_64/nss_nis-3.2-8.el9.x86_64.rpm ~/rpmbuild/RPMS/x86_64/yp-tools-4.2.3-2.el9.x86_64.rpm</span></code></pre></div>
                        <ul>
                        <li>/etc/yum.confに以下を追加。</li>
                        </ul>
                        <div class="sourceCode" id="cb85"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>exclude=ypbind nss_nis yp-tools authselect-libs autofs</span></code></pre></div>
                        <ul>
                        <li>ypbind起動。</li>
                        </ul>
                        <div class="sourceCode" id="cb86"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable ypbind <span class="at">--now</span></span></code></pre></div>
                        <p>失敗。</p>
                        <ul>
                        <li><code>rpcinfo -p NISサーバ名</code>
                        が通らない。/etc/hostsをyagami02と同じものに書き換えたら、通った。</li>
                        <li>ypdomainnameをwatanabe-groupに</li>
                        </ul>
                        <div class="sourceCode" id="cb87"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ypdomainname watanabe-group</span></code></pre></div>
                        <ul>
                        <li>/etc/yp.confを以下のように修正。</li>
                        </ul>
                        <div class="sourceCode" id="cb88"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="ex">domain</span> watanabe-group server watanabe-login</span></code></pre></div>
                        <ul>
                        <li>動作確認</li>
                        </ul>
                        <div class="sourceCode" id="cb89"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start ypbind</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ypwhich</span></span></code></pre></div>
                        <p>ypwhichまでは通るがgetnetできない。</p>
                        <ul>
                        <li><code>/etc/nsswitch.conf</code>をNISを先に見るように直接編集(あまりよくないが)</li>
                        </ul>
                        <div class="sourceCode" id="cb90"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>  <span class="ex">passwd:</span>     nis files sss systemd</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">group:</span>      nis files <span class="pp">[</span><span class="ss">SUCCESS=merge</span><span class="pp">]</span> sss <span class="pp">[</span><span class="ss">SUCCESS=merge</span><span class="pp">]</span> systemd</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">shadow:</span>     nis files</span></code></pre></div>
                        <p>getentが通ることを確認。</p></li>
                        <li><p>ホストベース認証</p>
                        <ul>
                        <li>サーバ側で</li>
                        </ul>
                        <div class="sourceCode" id="cb91"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keyscan</span> <span class="at">-t</span> ed25519 yagami03 <span class="kw">|</span> <span class="fu">sudo</span> tee <span class="at">-a</span> /etc/ssh/ssh_known_hosts</span></code></pre></div>
                        <ul>
                        <li>クライアント側で</li>
                        </ul>
                        <div class="sourceCode" id="cb92"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keyscan</span> <span class="at">-t</span> ed25519 watanabe-login.appi.keio.ac.jp <span class="kw">|</span> <span class="fu">sudo</span> tee <span class="at">-a</span> /etc/ssh/ssh_known_hosts</span></code></pre></div>
                        <p>/etc/ssh/sshd_configで</p>
                        <div class="sourceCode" id="cb93"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>HostKey /etc/ssh/ssh_host_ed25519_key</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>IgnoreUserKnownHosts no</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>HostbasedAuthentication yes</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>UseDNS yes</span></code></pre></div>
                        <p>にする。
                        その上で、<code>/etc/ssh/shosts.equiv</code>にホストベース認証したいホストをずらずら書く(今回これを忘れていた)。</p>
                        <p>ホスト側(計算ノード)で</p>
                        <div class="sourceCode" id="cb94"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--add-port</span><span class="op">=</span>2222/tcp</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /usr/sbin/sshd <span class="at">-d</span> <span class="at">-p</span> 2222</span></code></pre></div>
                        <p>クライアント側(ログインノード)で</p>
                        <div class="sourceCode" id="cb95"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-o</span> PreferredAuthentications=hostbased yagami03</span></code></pre></div>
                        <p>を実行し、通ればOK。sshdをrestart。</p></li>
                        </ul>
                        <p>疲れたなぁ。</p>
                        <p>yagai03にNFSのインストール。</p>
                        <div class="sourceCode" id="cb96"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> nfs-utils</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /mnt</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir home_nfs</span></code></pre></div>
                        <p>失敗する。firewall?</p>
                        <div class="sourceCode" id="cb97"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-service</span><span class="op">=</span>nfs</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-service</span><span class="op">=</span>rpc-bind</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-service</span><span class="op">=</span>mountd</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--reload</span></span></code></pre></div>
                        <p>ChatGPTの言う通りに作業してて、</p>
                        <div class="sourceCode" id="cb98"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con down eno1</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nmcli con up eno1</span></code></pre></div>
                        <p>を叩いてしまい、ネットワーク接続が切れてリモートから作業ができなくなってしまった。アホすぎる。</p>
                        <h2 id="月09日木"><a href="#09">10月09日(木)</a>
                        <a id="09"></a></h2>
                        <p>サーバ設定。Rockeyで</p>
                        <div class="sourceCode" id="cb99"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf update <span class="at">-y</span></span></code></pre></div>
                        <p>とすると</p>
                        <div class="sourceCode" id="cb100"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>Error: </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a> Problem 1: package authselect-1.2.6-3.el9.x86_64 from baseos requires authselect-libs(x86-64) = 1.2.6-3.el9, but none of the providers can be installed</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  - cannot install the best update candidate for package authselect-1.2.6-2.el9.x86_64</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  - package authselect-libs-1.2.6-3.el9.x86_64 from baseos is filtered out by exclude filtering</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a> Problem 2: package authselect-compat-1.2.6-3.el9.x86_64 from appstream requires authselect(x86-64) = 1.2.6-3.el9, but none of the providers can be installed</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  - package authselect-1.2.6-3.el9.x86_64 from baseos requires authselect-libs(x86-64) = 1.2.6-3.el9, but none of the providers can be installed</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  - cannot install the best update candidate for package authselect-compat-1.2.6-2.el9.x86_64</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  - package authselect-libs-1.2.6-3.el9.x86_64 from baseos is filtered out by exclude filtering</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>(try to add &#39;--skip-broken&#39; to skip uninstallable packages or &#39;--nobest&#39; to use not only best candidate packages)</span></code></pre></div>
                        <p>のようなエラーがでる。これは、<code>/etc/dnf/dnf.conf</code>に</p>
                        <div class="sourceCode" id="cb101"><pre
                        class="sourceCode txt"><code class="sourceCode default"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>exclude=ypbind nss_nis yp-tools authselect-libs autofs</span></code></pre></div>
                        <p>と、authselect-libの除外設定があるから。</p>
                        <p>Rockeyにslurmインストール。最初にソースからインストールしてしまったので話がややこしくなった。素直にdnfを使うべき。</p>
                        <p>ログインノードでのジョブ投入は成功。計算ノードからつながらない。</p>
                        <div class="sourceCode" id="cb102"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nc <span class="at">-zv</span> login-node-name 6817</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Ncat:</span> Version 7.92 <span class="er">(</span> <span class="ex">https://nmap.org/ncat</span> <span class="kw">)</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Ncat:</span> No route to host.</span></code></pre></div>
                        <p>ポートが塞がってますね。ログインノードで以下を実行。</p>
                        <div class="sourceCode" id="cb103"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--zone</span><span class="op">=</span>public <span class="at">--add-port</span><span class="op">=</span>6817/tcp <span class="at">--permanent</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--zone</span><span class="op">=</span>public <span class="at">--add-port</span><span class="op">=</span>6818/tcp <span class="at">--permanent</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--reload</span></span></code></pre></div>
                        <p>計算ノードは6818をあける必要がある。</p>
                        <div class="sourceCode" id="cb104"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>6818/tcp</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart firewalld</span></code></pre></div>
                        <p>通った(firewalldを再起動忘れて繋がらなかった・・・)。</p>
                        <p>次はMPI。計算ノードで以下を実行。</p>
                        <div class="sourceCode" id="cb105"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> openmpi openmpi-devel</span></code></pre></div>
                        <p>パスを通す。/etc/bashrcに以下を追加。</p>
                        <div class="sourceCode" id="cb106"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span>/usr/lib64/openmpi/bin:<span class="va">$PATH</span></span></code></pre></div>
                        <div class="sourceCode" id="cb107"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="va">PartitionName</span><span class="op">=</span>default <span class="va">Nodes</span><span class="op">=</span>ALL <span class="va">Default</span><span class="op">=</span>YES <span class="va">MaxTime</span><span class="op">=</span>INFINITE <span class="va">State</span><span class="op">=</span>UP</span></code></pre></div>
                        <p>としたらエラー。defaultは予約後だそうで。</p>
                        <div class="sourceCode" id="cb108"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="va">PartitionName</span><span class="op">=</span>main <span class="va">Nodes</span><span class="op">=</span>ALL <span class="va">Default</span><span class="op">=</span>YES <span class="va">MaxTime</span><span class="op">=</span>INFINITE <span class="va">State</span><span class="op">=</span>UP</span></code></pre></div>
                        <p>としたら通った。</p>
                        <div class="sourceCode" id="cb109"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">PartitionName</span><span class="op">=</span>main <span class="va">Nodes</span><span class="op">=</span>ALL <span class="va">Default</span><span class="op">=</span>YES <span class="va">MaxTime</span><span class="op">=</span>1-00:00:00 <span class="va">State</span><span class="op">=</span>UP</span></code></pre></div>
                        <p>と、24時間制限をつけた。</p>
                        <p>クラスタにlammpsインストール</p>
                        <div class="sourceCode" id="cb110"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> github</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">-b</span> release <span class="at">--depth</span> 1  https://github.com/lammps/lammps.git</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> lammps</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> ../cmake <span class="dt">\</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> CMAKE_C_COMPILER=mpicc <span class="dt">\</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> CMAKE_CXX_COMPILER=mpicxx <span class="dt">\</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> CMAKE_INSTALL_PREFIX=~/usr/local <span class="dt">\</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> CMAKE_CXX_FLAGS=<span class="st">&quot;-O3 -std=c++11 -fopenmp&quot;</span> <span class="dt">\</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> BUILD_MPI=yes <span class="dt">\</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> BUILD_OMP=yes <span class="dt">\</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> CMAKE_EXE_LINKER_FLAGS=<span class="st">&quot;-O3 -std=c++11 -fopenmp&quot;</span> <span class="dt">\</span></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">-D</span> PKG_MOLECULE=on</span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-j</span> 4</span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code></pre></div>
                        <p>無事にログインノード、計算ノードでlammpsも並列に走った。よし。これで研究室クラスター復活。</p>
                        <p>・・・疲れたなぁ。</p>
                        <h2 id="月08日水"><a href="#08">10月08日(水)</a>
                        <a id="08"></a></h2>
                        <p>会議。</p>
                        <p>来年度に向けて、博士号取得のスケジュール確認をするなどした。</p>
                        <p><a
                        href="https://www.theguardian.com/australia-news/2025/oct/06/deloitte-to-pay-money-back-to-albanese-government-after-using-ai-in-440000-report">デロイトがオーストラリア連邦政府から受託した報告書をAIを使って書いたのがバレて返金</a></p>
                        <p>存在しない参考文献でバレたとのこと。デロイトは「報告内容には変更はない」と言っているけれど、「主要な部分もAIで書いたのでは？」と思われるよね・・・</p>
                        <p>研究室ミーティング。シアシックニングと格闘ゲームの強化学習。今日から本格的に英語での発表です。</p>
                        <p>NIS共有の設定続き。うまくNIS共有できなかったのはサーバ側のポートが閉じていたから。</p>
                        <p>サーバ側で</p>
                        <div class="sourceCode" id="cb111"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>861/tcp</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>861/udp</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>111/tcp</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--permanent</span> <span class="at">--add-port</span><span class="op">=</span>111/udp</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> firewall-cmd <span class="at">--reload</span></span></code></pre></div>
                        <p>を実行することでポートが通った。</p>
                        <p>クライアント側で</p>
                        <div class="sourceCode" id="cb112"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /usr/sbin/ypbind <span class="at">-d</span></span></code></pre></div>
                        <p>を実行することでどこでこけているかがわかる。ypwhichやgetentが通るようになった時点で</p>
                        <div class="sourceCode" id="cb113"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start ypbind</span></code></pre></div>
                        <p>で通った。</p>
                        <p>クライアントでypbindが自動起動するか確認。</p>
                        <div class="sourceCode" id="cb114"><pre
                        class="sourceCode sh"><code class="sourceCode bash"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo systemctl is-enabled ypbind</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="ex">enabled</span></span></code></pre></div>
                        <p>大丈夫ですね。</p>
                        <p>Slurmのインストール途中で時間切れ。</p>
                        <p>ノーベル化学賞が日本人受賞でバタバタ・・・</p>
                        <h2 id="月07日火"><a href="#07">10月07日(火)</a>
                        <a id="07"></a></h2>
                        <p>田園都市線、昨日の深夜に復旧。今日は普通につかえてよかった。</p>
                        <p>夜は物理学会のノーベル賞対応でバタバタ。</p>
                        <h2 id="月06日月"><a href="#06">10月06日(月)</a>
                        <a id="06"></a></h2>
                        <p>昨夜、田園都市線が脱線事故を起こし、最寄り駅が全く動かなくなってしまった。
                        しばらくしたら復活するかと思ったが、全く復活しなかったので、息子は別の経路で登校。僕は在宅勤務に。</p>
                        <p>ちょっと接触しただけらしいので、すぐ復旧すると思っていたが、まさか今日一日ずっと不通だとは思わなかった。</p>
                        <p>息子が帰れないので、車で学校まで迎えにいった。</p>
                        <p>計算科学春の学校の飛行機とかホテルとかの予約した。こういうの疲れるな。</p>
                        <h2 id="月05日日"><a href="#05">10月05日(日)</a>
                        <a id="05"></a></h2>
                        <p>NOP</p>
                        <p>NOPといいつつ、なんか毎週土日に車での子供の送り迎えがあるから相当疲れる・・・</p>
                        <h2 id="月04日土"><a href="#04">10月04日(土)</a>
                        <a id="04"></a></h2>
                        <p>NOP</p>
                        <h2 id="月03日金"><a href="#03">10月03日(金)</a>
                        <a id="03"></a></h2>
                        <p>1on1とか。</p>
                        <p>GitHub演習のガイダンスの準備でバタバタした。アナウンスには正しいURLを書いたが、モジュールのページのZoomのURLが古いままだった。
                        来年は気をつけないと。</p>
                        <p>ガイダンスに引き続き、今年から生成AIとの付き合い方のガイダンスも追加。</p>
                        <p><a
                        href="https://speakerdeck.com/kaityo256/generative-ai-and-us">生成AIとの付き合い方</a></p>
                        <p>出張申請がボロボロだった。事務の方にいろいろご迷惑をおかけした。大変申し訳ありません。後で修正されたバージョンを確認して、来年から気をつけます。</p>
                        <p>査読返した。</p>
                        <p>研究室のジョブスケジューラ確認。Rocky+OpenPBSではトラブルが多いらしい。Slurmだとすぐ入るっぽい。試さないと(いつ？)。</p>
                        <h2 id="月02日木"><a href="#02">10月02日(木)</a>
                        <a id="02"></a></h2>
                        <p>講義動画が全てBoxだったのを、K-LMSのVideoにすべて修正した。相当時間かかった。</p>
                        <p>あと、プログラミング基礎同演習の動画内の回数が間違っているな。確か、コロナの時に講義回数が一回減って、その後追加したからズレたんだな。</p>
                        <p>講義のガイダンス用の「生成AIとの付き合い方」のスライド最終調整。完成したことにする。GitHub演習とプログラミング基礎同演習で使う予定。</p>
                        <p>山本さんが<a
                        href="https://www.biophys.jp/ann/ann01_15.html">日本生物物理学会学生発表賞を受賞</a>。おめでとうございます！</p>
                        <p>研究室ミーティング。やっぱり英語でやるの結構大変だな。</p>
                        <p>出版社からの問い合わせを返した。</p>
                        <h2 id="月01日水"><a href="#01">10月01日(水)</a>
                        <a id="01"></a></h2>
                        <p>10月になってしまった。毎月これ書いてない？</p>
                        <p>GitHub演習の班分け表忘れてた。慌てて作る。</p>
                        <p>昨日注文した留学生用PCが今日届いた。素晴らしい。早速留学生さんと一緒にセットアップ。</p>
                        <p>プログラミング基礎同演習とGitHub演習のアナウンス投げた。</p>
                        <p>明日の発表スライド作った。</p>
                        <p>講義のガイダンス用の「生成AIとの付き合い方」のスライド生成した。</p>
                        <p>秋学期の講義が始まるのでバタバタする。</p>
          </article>
  </body>

  </html>