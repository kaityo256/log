<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
                <title>d202110</title>
    <style type="text/css">
      code {
        white-space: pre;
      }
    </style>
        <style type="text/css"></style>

    <link rel="stylesheet" href="style.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- link rel="stylesheet" href="github-markdown.css" type="text/css" / -->
          </head>

  <body>
    <article class="markdown-body">
                        <h1 id="ログ">ログ</h1>
<p><a href="index.html">ログ一覧</a></p>
<h2 id="月04日月"><a href="#04">10月04日(月)</a> <a id="04"></a></h2>
<p>秋の安全教育提出した。ラボメンバーも提出した。</p>
<p>GitHub講義、座学第三回の動画撮り終わった。プログラミング基礎同演習とGitHub演習の班分けも完了。</p>
<p>プログラミング基礎同演習の第二回は明日だな。</p>
<h2 id="月03日日"><a href="#03">10月03日(日)</a> <a id="03"></a></h2>
<p>keychain便利だな。もっと早く対応すれば良かった。</p>
<p>GitHub演習、4回の座学それぞれに2回の短いテーマを入れているので、全部で8回分のスライドを作る必要がある。4回分できていた状態から、金曜深夜に5回目、土曜深夜に6回目を完成させた。どちらも子供が寝てから本気でやったので本当に疲れた。</p>
<p>7回目完成。もっと短めになる予定だったが、結構長くなってしまったな。</p>
<p>本当は日曜日中に8回目までやりたかったが。あと、月曜に講義3つ録画するつもりなんだけど、できるんかな？</p>
<h2 id="月02日土"><a href="#02">10月02日(土)</a> <a id="02"></a></h2>
<p>腰を据えてssh-agent問題に取り組む。</p>
<p>問題。</p>
<p>WSL2のUbuntuでssh-agentを立ち上げる。</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="bu">eval</span> <span class="kw">`</span><span class="fu">ssh-agent</span><span class="kw">`</span></a></code></pre></div>
<p>すると、ssh-addが出来るようになる。しかし、一度ターミナルを閉じてもう一度開くと、ssh-agentは生きているのにssh-add出来なくなる。</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="fu">pidof</span> ssh-agent</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ex">95</span></a>
<a class="sourceLine" id="cb2-3" title="3">$ <span class="fu">ssh-add</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="ex">Could</span> not open a connection to your authentication agent.</a></code></pre></div>
<p>だもんで面倒だから<code>.zshrc</code>に</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="bu">eval</span> <span class="kw">`</span><span class="fu">ssh-agent</span><span class="kw">`</span></a></code></pre></div>
<p>って書いてて、毎回起動してたんだけど、そうすると当然こうなる。</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1">$ <span class="fu">pidof</span> ssh-agent                                                                                                   </a>
<a class="sourceLine" id="cb4-2" title="2"><span class="ex">32173</span> 31548 31344 31137 29020 28832 27947 27740 27248 27156 22731 22181 21753 21580 20882 19950 19721 18981 18612 18466 17212 16870 16678 16613 16482 15297 14260 13290 12988 12923 12591 12089 12084 11110 10915 10581 10386 10155 10036 9839 9505 9131 8890 7440 6796 6345 5675 5404 5147 4812 4709 3981 3679 3416 3378 3200 2907 2455 2065 1870 1433 952 279 95</a></code></pre></div>
<p>これはなんとかしないといけない。</p>
<p><a href="https://esc.sh/blog/ssh-agent-windows10-wsl2/">この記事</a>に解決策があった。</p>
<p>まずは不要なプロセスを全部殺す。いちいち殺すの面倒なので、PowerShellから以下を実行。</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="ex">wsl</span> --shutdown</a></code></pre></div>
<p>次にWSL2のUbuntuで、まず<code>key-chain</code>を入れる。</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">sudo</span> apt-get install keychain</a></code></pre></div>
<p>keychainを使う。</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="ex">/usr/bin/keychain</span> -q --nogui <span class="va">$HOME</span>/.ssh/id_rsa</a></code></pre></div>
<p>ここでパスフレーズを聞かれるので入力。</p>
<p>すると、<code>$HOME/.keychain</code>にシェルスクリプトが出来るので、それを実行する。</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="bu">source</span> <span class="va">$HOME</span>/.keychain/<span class="va">$HOST</span>-sh</a></code></pre></div>
<p>あとはこれで接続の度にssh-addしなくて良くなった。よしよし。</p>
<p><a href="https://zenn.dev/kaityo256/articles/ssh_agent_on_wsl">記事</a>にも書いた。</p>
<h2 id="月01日金"><a href="#01">10月01日(金)</a> <a id="01"></a></h2>
<p>WSLのUbuntu、起動の度に<code>eval ssh-agent</code>してるんだけど、当然こうなる。</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1">$ <span class="fu">pidof</span> ssh-agent                                                                                                   </a>
<a class="sourceLine" id="cb9-2" title="2"><span class="ex">32173</span> 31548 31344 31137 29020 28832 27947 27740 27248 27156 22731 22181 21753 21580 20882 19950 19721 18981 18612 18466 17212 16870 16678 16613 16482 15297 14260 13290 12988 12923 12591 12089 12084 11110 10915 10581 10386 10155 10036 9839 9505 9131 8890 7440 6796 6345 5675 5404 5147 4812 4709 3981 3679 3416 3378 3200 2907 2455 2065 1870 1433 952 279 95</a></code></pre></div>
<p>うん、これはさすがになんとかした方がよい気がしてきた。</p>
          </article>
  </body>

  </html>